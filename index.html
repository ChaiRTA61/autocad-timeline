<!DOCTYPE html>
<html>
<head>
  <title>Timeline ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö</title>
  <script src="https://www.gstatic.com/charts/loader.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #formSection {
      display: none;
      position: fixed;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      background: #f2f2f2;
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 1000;
    }
    label, input { display: block; margin: 5px 0; }
    #timeline { height: 500px; margin-top: 30px; }
    #taskList { margin-top: 20px; }
    button { margin-top: 10px; }
    .task-item {
      margin-bottom: 8px;
      background: #f9f9f9;
      padding: 5px 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <h2>üìÖ Timeline ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö</h2>

  <div id="formSection">
    <label>‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå: <input type="text" id="projectName"></label>
    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°: <input type="date" id="startDate"></label>
    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î: <input type="date" id="endDate"></label>
    <button onclick="addToTimeline()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</button>
    <button onclick="closeForm()">‡∏õ‡∏¥‡∏î</button>
  </div>

  <div id="timeline"></div>
  <div id="taskList"></div>

  <script>
    google.charts.load("current", { packages: ["timeline"] });
    google.charts.setOnLoadCallback(initChart);

    let chart, dataTable;
    let timelineData = [];

    function initChart() {
      const container = document.getElementById("timeline");
      chart = new google.visualization.Timeline(container);
      dataTable = new google.visualization.DataTable();
      dataTable.addColumn({ type: "string", id: "‡∏á‡∏≤‡∏ô" });
      dataTable.addColumn({ type: "date", id: "‡πÄ‡∏£‡∏¥‡πà‡∏°" });
      dataTable.addColumn({ type: "date", id: "‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î" });

      const saved = localStorage.getItem("timelineData");
      if (saved) {
        timelineData = JSON.parse(saved);
      }

      drawChart();
      renderTaskList();
    }

    function drawChart() {
      dataTable.removeRows(0, dataTable.getNumberOfRows());
      timelineData.forEach(row => {
        dataTable.addRow([row[0], new Date(row[1]), new Date(row[2])]);
      });
      chart.draw(dataTable);
    }

    function renderTaskList() {
      const container = document.getElementById("taskList");
      container.innerHTML = "<h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô</h3>";
      timelineData.forEach((row, index) => {
        const div = document.createElement("div");
        div.className = "task-item";
        div.innerHTML = `
          üõ†Ô∏è ${row[0]} (${row[1]} ‡∏ñ‡∏∂‡∏á ${row[2]})
          <button onclick="deleteTask(${index})">üóëÔ∏è ‡∏•‡∏ö</button>
        `;
        container.appendChild(div);
      });
    }

    function addToTimeline() {
      const name = document.getElementById("projectName").value.trim();
      const start = document.getElementById("startDate").value;
      const end = document.getElementById("endDate").value;

      if (!name || !start || !end) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
        return;
      }

      if (new Date(start) > new Date(end)) {
        alert("‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î");
        return;
      }

      const row = [name, start, end];
      timelineData.push(row);
      localStorage.setItem("timelineData", JSON.stringify(timelineData));
      drawChart();
      renderTaskList();
      clearInputs();
      closeForm();
    }

    function deleteTask(index) {
      if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        timelineData.splice(index, 1);
        localStorage.setItem("timelineData", JSON.stringify(timelineData));
        drawChart();
        renderTaskList();
      }
    }

    function clearInputs() {
      document.getElementById("projectName").value = "";
      document.getElementById("startDate").value = "";
      document.getElementById("endDate").value = "";
    }

    function closeForm() {
      document.getElementById("formSection").style.display = "none";
    }

    document.addEventListener("click", function () {
      document.getElementById("formSection").style.display = "block";
    }, { once: true });
  </script>
</body>
</html>
